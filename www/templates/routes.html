<ion-view view-title="C.A : {{ ca | number:2 }} DHS">
    <div class="bar bar-subheader bar-balanced" style="text-align: center; border-color: #D14949; background-color:#AE2121; box-shadow: none; height: auto;">
     
      <!-- <div class="button-bar">
        <a class="button" style="    font-weight: 900; background-color: #CE1515; font-size: 12.5px; text-transform: none; white-space: normal; text-overflow: none; overflow: none; max-width: 100%; min-height: 15px; max-height: 30px;">aujourd'hui</a>
        <a class="button" style="    font-weight: 900; background-color: #CE1515; font-size: 12.5px; text-transform: none; white-space: normal; max-width: 100%; min-height: 15px; max-height: 30px;">en retard</a>        
      </div> -->
      <a style="margin: 7px; color: white; font-size: 16px; text-decoration: underline; font-weight: 600;" ng-click="today()">aujourd'hui</a>
      <a style=" margin: 7px; color: white; font-size: 16px; text-decoration: underline; font-weight: 600;" ng-click="retard()">autres</a>
      <label for="date" style=" margin: 7px; font-size: 16px; font-weight: 600;"> état: </label>
        <select id="date" style="font-size: 14px;" ng-model="search.state">
          <option value="0">en attente</option>
          <option value="1">visité</option>
        </select>
      </label>
    </div>

      <div class="key_map_container" style="margin: 0;">
          <span class="key_map" style=" font-size: 12px; color: black;text-align: center;">
              <i style="color: red;" class="icon ion-flag"></i> en attente &nbsp;
              <i style="color: orange;" class="icon ion-flag"></i> non facturé &nbsp;
              <i style="color: green;" class="icon ion-flag"></i> facturé
          </span>
      </div>
    <br>
    <ion-content ng-class="{expanded:$scope.isExpanded}"> 
    <br>
    <br>
        <ion-list show-delete="false" can-swipe="true" style="margin-top: 30px;">
            <ion-item
            collection-repeat="mission in missions | orderBy:'state' |filter:search"
            item="mission"
            ng-click="goToClient(mission)" 
            style="font-size: 25px; border-bottom: 1px solid grey; padding: 0;" 
            class="item-no-padding">
                <h2 style="font-weight: 900;">Etat : <i style="color: {{ mission.state | flag }}; font-size: 25
                  px;" class="icon ion-flag"></i></h2>
                  <h2 style="font-weight: 700; margin: 0;">{{ mission.address }}</h2>
                <p style=" margin: 0;">Nom client : {{ mission.prenom }} {{ mission.nom }} </p>
                <p style=" margin: 0;">Code visite : {{ mission.code_mission }}</p>
                <p style=" margin: 0;">Localisation : {{ mission.lat }}, {{ mission.lng }} </p>
                <ion-option-button ui-sref="app.brandfive({ mission : mission.id_db })" class="button-calm icon ion-android-walk" style="color: #FFF;"></ion-option-button>
                <ion-option-button class="button-balanced icon ion-map" style="color: #FFF;" ng-click="openModal(route.address)"></ion-option-button>
            </ion-item>
        </ion-list>
        <script id="my-modal.html" type="text/ng-template">
          <ion-modal-view>
            <ion-header-bar>
              <h1 class="title" style="color: red;">Itinéraire</h1>
            </ion-header-bar>
            <ion-content>
              <div>
                <leaflet markers="markers" center="client" defaults="defaults" width="100%" height="500px"></leaflet>
            </div>
            </ion-content>
          </ion-modal-view>
        </script>
     </ion-content>
</ion-view>